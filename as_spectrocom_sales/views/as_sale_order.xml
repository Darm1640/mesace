<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_spectrocom_form" model="ir.ui.view">
        <field name="model">sale.order</field>
        <field name="name">sale.order.edit.form</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <header>
                <button name="%(as_spectrocom_sales.as_duplicar_ventas_asd_act)d"
                        context="{'default_as_venta': active_id}" string="Duplicar" type="action" class="btn-primary"/>
                <button name="generate_request_purchase" type="object" string="Crear Compra"/>
            </header>
            <xpath expr="//button[@name='action_view_invoice']" position="before">
                <button name="action_purchase_order_sale" type="object" class="oe_stat_button" icon="fa-table">
                    <field name="as_purchase_count_sale" widget="statinfo" string="Compras"/>
                </button>
            </xpath>
            <xpath expr="//button[@name='action_confirm']" position="after">
                <button name="as_action_vta_autorizada" string="VTA AUTORIZADA" type="object" states="sale"
                        class="oe_highlight"/>
            </xpath>
            <xpath expr="//field[@name='currency_id']" position="after">
                <field name="as_alias_lugar"/>
                <field name="as_cotizacion_con_resumen" widget="radio"/>
            </xpath>
            <xpath expr="//field[@name='payment_term_id']" position="after">
                <field name="currency_id"/>
            </xpath>
            <xpath expr="//field[@name='analytic_account_id']" position="after">
                <field name="as_account_v_autorizado"/>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="as_template_id" readonly="True" force_save="1"/>
                <field name="as_numeracion_interna" readonly="True" force_save="1"/>
                <field name="as_bussiness_id" invisible="True"/>
                <field name="as_type_id" invisible="True"/>
                <field name="as_is_suscripcion" invisible="True"/>
                <field name="as_subscription_template_id" attrs="{'required': [('as_is_suscripcion','!=',False)]}"/>
                <field name="as_referencia"/>
                <field name="as_ruta"/>

            </xpath>
            <xpath expr="//field[@name='order_line']/tree//field[@name='tax_id']" position="before">
                <field name="as_stock_fisico_actual"/>
                <field name="as_show_price" optional="hide"/>
            </xpath>
            <xpath expr="//notebook//page//field//tree//field[@name='price_unit']" position="replace">
                <field name="price_unit"/>
            </xpath>

            <xpath expr="//field[@name='order_line']/tree//field[@name='tax_id']" position="after">
                <field name="as_mayor_precio_compra"/>
                <field name="as_total_bob"/>
                <field name="as_utilidad"/>
                <field name="as_total_us"/>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree//field[@name='price_total']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
            <xpath expr="//field[@name='user_id']" position="attributes">
                <attribute name="domain"></attribute>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree//field[@name='product_id']" position="attributes">
                <attribute name="options">{"no_create": False, 'no_create_edit': False, 'no_quick_create': True}
                </attribute>
            </xpath>
            <xpath expr="//field[@name='note']" position="attributes">
                <attribute name="placeholder">Aclaraciones</attribute>
            </xpath>
            <xpath expr="//page[@name='order_lines']" position="after">
                <page string="Condiciones de la Propuesta" name="as_conditions_lines">
                    <group>
                        <field name="as_proposal_id"/>
                        <field name="as_texto"/>
                        <button name="boton_add" string="Agregar" type="object" class="btn-primary"/>
                    </group>
                    <field name="as_conditions_lines" mode="tree">
                        <form>
                            <field name="name"/>
                            <field name="as_valor"/>
                        </form>
                        <tree string="Condiciones de la Propuesta" editable="bottom">
                            <field name="name"/>
                            <field name="as_valor"/>
                        </tree>

                    </field>
                </page>
                <page string="Instructiva de Trabajo" name="as_instructive_lines">
                    <group>
                        <field name="as_proposal2_id"/>
                    </group>
                    <field name="as_instructive_lines" mode="tree">
                        <form>
                            <field name="sequence"/>
                            <field name="as_product_id" invisible="True"/>
                            <field name="name"/>
                            <field name="as_template_id"/>
                            <field name="as_type_id"/>
                            <field name="as_partner_id"/>
                            <field name="as_lugar"/>
                            <field name="as_fecha_planificada"/>
                            <field name="as_presupuesto_planificado"/>
                            <field name="as_duration"/>
                            <field name="as_duration_type"/>
                        </form>
                        <tree string="Instructiva de Trabajo" editable="bottom">
                            <field name="sequence" optional="hide"/>
                            <field name="as_product_id" invisible="True" optional="hide"/>
                            <field name="as_template_id" optional="hide"/>
                            <field name="as_type_id" optional="hide"/>
                            <field name="as_partner_id" optional="hide"/>
                            <field name="as_lugar" optional="hide"/>
                            <field name="as_fecha_planificada" required="True"/>
                            <field name="as_presupuesto_planificado" required="True"/>
                            <field name="as_duration" optional="hide"/>
                            <field name="as_duration_type" optional="hide"/>
                            <field name="as_note" required="True"/>
                            <field name="as_tipo_adjunto"/>
                            <!-- linea 98 es la de la instructiva  attrs="{'required': [('as_is_suscripcion','!=',False)]}" -->
                        </tree>

                    </field>
                </page>
                <!-- <page string="Instructiva de Trabajo" name="as_instructive_lines_2" attrs="{'invisible':[('as_bandera', '!=', False)]}">
                    <group>
                        <field name="as_proposal2_id" invisible="True"/>
                        <field name="as_bandera" invisible="True"/>
                    </group>
                    <field name="as_instructive_lines_2" mode="tree">
                        <form>
                            <field name="sequence_2" />
                            <field name="as_product_id" invisible="True"/>
                            <field name="as_nombre_item" />
                            <field name="as_numero_parte" />
                            <field name="as_modelo" />
                            <field name="as_marca" />
                            <field name="as_unidad" />
                            <field name="as_cant" />
                            
                        </form>
                        <tree string="Instructiva de Trabajo" editable="bottom">
                            <field name="sequence_2" />
                            <field name="as_product_id" invisible="True"/>
                            <field name="as_nombre_item" />
                            <field name="as_numero_parte" />
                            <field name="as_modelo" />
                            <field name="as_marca" />
                            <field name="as_unidad" />
                            <field name="as_cant" />

                           
                        </tree>

                    </field>
                </page> -->
            </xpath>
            <xpath expr="//button[@name='action_cancel']" position="after">
                <!-- <button name="as_generate_project" type="object" string="Generar Proyecto" icon="fa-book"
                    class="oe_highlight" states="draft" /> -->
                <button name="as_generate_sale_draft" type="object"
                        confirm="Esta seguro que quiere crear una nueva cotizaciÃ³n?" string="Crear Version"
                        icon="fa-bars"
                        class="oe_highlight" states="draft"/>
            </xpath>
            <!-- <xpath expr="//field[@name='payment_term_id']" position="after">
                <field name="as_cont_id"/>
            </xpath> -->
        </field>
    </record>
    <record id="view_quotation_tree_with_spectrocom" model="ir.ui.view">
        <field name="name">sale.order.tree</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_quotation_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="replace">
                <field name="as_numeracion_interna"/>
                <field name="as_template_id"/>
                <field name="as_cont_id"/>
                <field name="as_referencia"/>
            </xpath>
            <xpath expr="//field[@name='user_id']" position="after">
                <field name="name"/>
            </xpath>

        </field>
    </record>
    <record id="view_order_tree_with_spectrocom" model="ir.ui.view">
        <field name="name">sale.order.tree</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="replace">
                <field name="as_numeracion_interna"/>
                <field name="as_template_id"/>

            </xpath>
            <xpath expr="//field[@name='user_id']" position="after">
                <field name="name"/>
                <field name="as_cont_id"/>
                <field name="as_dias_vencimiento"/>

            </xpath>

        </field>
    </record>
    <record id="view_ocultar_impuesto_with_spectrocom" model="ir.ui.view">
        <field name="name">sale.order.ocultar.impuestos</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='order_line']/tree//field[@name='tax_id']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_mostrar_vista_informe" model="ir.ui.view">
        <field name="name">sale.order.mostrar.grupo</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='other_information']/group/group[@name='sale_reporting']" position="attributes">
                <attribute name="groups">base.group_user</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_mostrar_fecha_presupuesto" model="ir.ui.view">
        <field name="name">sale.order.mostrar.fecha.presup</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='order_details']/field[@name='date_order']" position="attributes">
                <attribute name="nolabel">0</attribute>
                <attribute name="string">Fecha de presupuesto</attribute>
                <attribute name="groups">base.group_user</attribute>
            </xpath>
        </field>
    </record>

    <record id="view_mostrar_origen_presupuesto" model="ir.ui.view">
        <field name="name">sale.order.mostrar.origin.tree</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_quotation_tree_with_onboarding"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="origin"/>
                <field name="date_order" string="Fecha presupuesto"/>
            </xpath>
        </field>
    </record>

    <record id="view_mostrar_origen_presupuesto_pedidos" model="ir.ui.view">
        <field name="name">sale.order.mostrar.origin.tree.pedidos</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="origin"/>
                <field name="date_order" string="Fecha presupuesto"/>
            </xpath>
        </field>
    </record>

    <record id="search_sale_order_ept" model="ir.ui.view">
        <field name="name">search_sale_order_ept</field>
        <field name="model">sale.order</field>
        <field name="type">search</field>
        <field name="inherit_id" ref="sale.sale_order_view_search_inherit_quotation"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='my_quotation']" position="after">
                <filter string="Origen" domain="[('origin','&gt;=','0')]" help="origin" name='origin'/>
                <!-- <filter string="Back Order" domain="[('state','=','back_order')]" help="Back Order"
                    name='filter_backorder' /> -->
            </xpath>
        </field>

    </record>

</odoo>