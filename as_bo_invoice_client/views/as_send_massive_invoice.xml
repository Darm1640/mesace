<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="as_send_massive_tree" model="ir.ui.view">
            <field name="name">Envio Masivo</field>
            <field name="model">as.send.massive.invoice</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name" />
                    <field name="state" />
                    <field name="as_cont_date_start" />
                    <field name="as_cont_date_end" />
                    <field name="as_type_mode" />
                    <field name="as_codigo_sistema" />
                    <field name="as_sucursal" />
                    <field name="as_pdv_id" />
                </tree>
            </field>
        </record>

        <record id="as_send_massive_form" model="ir.ui.view">
            <field name="name">Envio Masivo</field>
            <field name="model">as.send.massive.invoice</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="as_create_evento_significativo" string="Recepcionar" states="draft"
                            type="object" />
                        <button name="as_send_package" string="Enviar Paquete" type="object" states="event" />
                        <button name="as_validate_package" string="Validar Paquete" type="object" states="pendiente" />
                        <button name="as_validate_event" string="Volver a Evento" type="object" states="validado" />
                        <button name="as_get_draft" string="Volver Borrador" type="object" />

                        <field name="state" widget="statusbar"
                            statusbar_visible="draft,event,cola,fuera,pendiente,validado" />

                    </header>
                    <sheet>
                        <group col="4">
                            <field name="as_type_mode" />
                            <field name="as_codigo_sistema" required="True" force_save="1" />
                            <field name="as_sucursal" required="True" force_save="1" />
                            <field name="name" />
                            <field name="as_pdv_id" required="True" force_save="1" />
                            <field name="as_cantidad" invisible="1"/>
                            <field name="as_fiscal_document_code" required="True" force_save="1" />
                            <field name="as_sector_type" required="True" force_save="1" />
                            <field name="as_emission_type" required="True" force_save="1" />
                            <field name="as_package_code" readonly="True" force_save="1" />
                            <field name="as_package_valid_code" readonly="True" force_save="1" />


                        </group>
                        <notebook>
                            <page string="Evento Signiticativo" col="4"
                                attrs="{'invisible': [('as_type_mode', '!=','packet')]}">
                                <group name="Evento Signiticativo">
                                    <field name="as_cont_date_start"
                                        attrs="{'required': [('as_type_mode', '=','packet')]}" />
                                    <field name="as_cont_date_end"
                                        attrs="{'required': [('as_type_mode', '=','packet')]}" />
                                    <field name="as_cont_reason" />
                                    <field name="as_cont_cafc" />
                                    <field name="as_cont_cudf" />
                                    <field name="as_cont_note" />
                                    <field name="as_event_code" />
                                    <field name="as_cont_code" force_save="1" />
                                </group>
                            </page>
                            <page string="Facturas a Enviar">

                                <field name="as_invoice_move_ids" />
                            </page>
                            <page string="XMLs enviados">
                                <group>
                                    <field name="as_automatico" />
                                    <field name="xml_evento" style="word-wrap: break-word;max-width:950px" />
                                    <field name="xml_recepcion" style="word-wrap: break-word;max-width:950px" />
                                    <field name="xml_validacion" style="word-wrap: break-word;max-width:950px" />
                                    <field name="as_numero" />
                                </group>
                            </page>
                        </notebook>


                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" />
                        <field name="message_ids" widget="mail_thread" />
                    </div>
                </form>
            </field>
        </record>

        <record id="as_send_massive_action" model="ir.actions.act_window">
            <field name="name">Envio Masivo</field>
            <field name="res_model">as.send.massive.invoice</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="as_send_massive_tree" />
        </record>

        <menuitem id="as_send_massive_id" action="as_send_massive_action"
            parent="as_bo_invoice_client.as_invoice_bolivia_menu" name="Envio Masivo" sequence="55" />

    </data>
</odoo>