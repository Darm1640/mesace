<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="view_tesoreria_form" model="ir.ui.view">
            <field name="name">as.tesoreria.form</field>
            <field name="model">as.tesoreria</field>
            <field name="arch" type="xml">
                <form string="Company">
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="open,close" />
                        <button name="as_get_caja_close" string="Cerrar Caja" type="object" states="open"
                            class="oe_highlight" />
                        <button name="as_get_caja_open" string="Abrir Caja" type="object" states="close"
                            class="oe_highlight" />
                        <button name="as_get_caja_report_in_close" string="Reporte Caja Chica" type="object" states="close"
                            class="oe_highlight" />
                        <button name="as_imprimir_pdf_caja_chica" string="Reporte Caja Chica PDF" type="object" states="close"
                            class="oe_highlight" />
                        <button name="as_imprimir_pdf_caja_chica_previa" string="VISTA PREVIA" type="object" states="close"
                            class="oe_highlight" />
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <!-- <button type="object" name="action_view_moves" class="oe_stat_button" icon="fa-usd">
                                <field name="as_moves_count" widget="statinfo" string="Asientos" />
                            </button> -->
                        </div>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only" />
                            <h1>
                                <field name="name" readonly="True" />
                            </h1>
                        </div>
                        <group col="4">
                            <!-- <field name="as_currency_id" /> -->
                            <field name="as_user_id" />
                            <field name="as_date" />
                            <field name="account_analytic_id" />
                            <field name="as_es_fiscal" />
                            <field name="as_tipo_referencia" />
                            <field name="as_currency_id" invisible="True" />
                        </group>
                        <notebook>
                            <page string="Ingresos" name="ingreso">
                                <header>
                                    <button name="add_payment" string="Agregar" type="object" states="Borrador"
                                        class="oe_highlight"
                                        context="{'default_as_payment_type' : 'inbound','default_as_type' : 'invoice','default_as_tesoreria_id':active_id}"
                                        attrs="{'invisible' : [('state', '=', 'close')]}" />
                                </header>

                                <!-- <field name="as_payment_ids" context="{'date':date}"> -->
                                <field name="as_inpayment_ids"
                                    options="{'no_create_edit': true, 'no_quick_create': true}">
                                    <tree decoration-info="state == 'confirm'" decoration-success="state == 'data'"
                                        decoration-danger="state == 'cancel'" create="0" delete="1">
                                        <field name="as_partner_id" />
                                        <field name="journal_id" />
                                        <field name="as_type" />
                                        <field name="payment_acquirer_id" />
                                        <field name="as_payment_type" />
                                        <field name="as_is_anticipo" />
                                        <field name="as_amount" sum="Total" />
                                        <field name="state" />
                                        <field name="as_tesoreria_id" invisible="1" />
                                        <button name="cancel_payment" string="Cancel" type="object"
                                            icon="fa-window-close" />

                                    </tree>
                                </field>


                            </page>
                            <page string="Egreso" name="egreso">
                                <header>
                                    <button name="add_payment" string="Agregar" type="object" states="Borrador"
                                        class="oe_highlight"
                                        context="{'default_as_payment_type' : 'outbound','default_as_type' : 'invoice','default_as_tesoreria_id':active_id}"
                                        attrs="{'invisible' : [('state', '=', 'close')]}" />
                                </header>
                                <!-- <field name="as_payment_ids" context="{'date':date}"> -->
                                <field name="as_outpayment_ids"
                                    options="{'no_create_edit': true, 'no_quick_create': true}">
                                    <tree decoration-info="state == 'confirm'" decoration-success="state == 'data'"
                                        decoration-danger="state == 'cancel'" create="0" delete="1">
                                        <field name="as_partner_id" />
                                        <field name="journal_id" />
                                        <field name="payment_acquirer_id" />
                                        <field name="as_payment_type" />
                                        <field name="as_is_anticipo" />
                                        <field name="as_amount" sum="Total" />
                                        <field name="state" />
                                        <field name="as_tesoreria_id" invisible="1" />
                                        <button name="cancel_payment" string="Cancel" type="object"
                                            icon="fa-window-close" />

                                    </tree>
                                </field>

                            </page>
                            <page string="Movimiento de caja" name="movimiento_caja">
                                <h2>Informaci√≥n para Caja</h2>
                                <group col="4">
                                    <field name="as_partner_id" />
                                    <field name="as_account_gasto_id" />
                                    <field name="as_account_iva" />
                                    <field name="as_saldo_inicial" />
                                    <field name="as_account_id" readonly="True" />
                                    <field name="journal_id" />
                               
                                </group>
                                <header>
                                    <button name="add_payment_caja" string="Agregar" type="object" states="Borrador"
                                        class="oe_highlight" context="{'default_as_tesoreria_id':active_id}"
                                        attrs="{'invisible' : [('state', '=', 'close')]}" />
                                </header>
                                <!-- <field name="as_payment_ids" context="{'date':date}"> -->
                                <field name="as_caja_chica_ids" create="0" editable="1" readonly="0">
                                    <tree decoration-info="state == 'confirm'" decoration-success="state == 'data'"
                                        decoration-danger="state == 'cancel'" create="0" editable="1" delete="1">
                                        <field name="name" readonly="True" />
                                        <field name="date" />
                                        <field name="as_partner_id" readonly="True" />
                                        <field name="as_tipo_documento" readonly="True" />
                                        <field name="as_tipo_factura" readonly="True" />
                                        <field name="as_tipo_retencion" readonly="True" />
                                        <field name="as_codigo_control_compra" />
                                        <field name="as_numero_factura_compra" />
                                        <field name="as_numero_autorizacion_compra" />
                                        <field name="as_invoice_fiscal" />
                                        <!-- <field name="currency_id" /> -->
                                        <field name="as_amount" />
                                        <field name="state" />
                                        <field name="as_tesoreria_id" invisible="True" />
                                        <button name="cancel_payment" string="Cancel" type="object"
                                            icon="fa-window-close" />

                                    </tree>
                                </field>
                                <group name="note_group" col="4" class="mt-2 mt-md-0">
                                <group class="oe_subtotal_footer oe_right" colspan="4">
                                    <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                        <label for="as_monto_total" />
                                    </div>
                                    <field name="as_monto_total" nolabel="1" class="oe_subtotal_footer_separator" />
                                    <!-- <button colspan="4" name="as_recalculate_amount_total" string="RECALCULAR" type="object" class="oe_highlight" /> -->
                                </group>
                                <div class="oe_clear"/>
                            </group>
                            </page>

                        </notebook>
                        <field name="as_amount_total_ingreso" />
                    </sheet>
                </form>
            </field>
        </record>
        <record id="view_tesoreria_tree" model="ir.ui.view">
            <field name="name">as.tesoreria.tree</field>
            <field name="model">as.tesoreria</field>
            <field name="arch" type="xml">
                <tree string="Tesoreria">
                    <field name="name" />
                    <field name="as_tipo_referencia"/>
                    <field name="as_currency_id" optional="hide"/>
                    <field name="as_user_id" />
                    <field name="as_date" />
                    <field name="account_analytic_id" />
                    <field name="state" />
                </tree>
            </field>
        </record>

        <record id="as_tesoreria_action_tree" model="ir.actions.act_window">
            <field name="name">Tesoreria</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">as.tesoreria</field>
            <field name="view_mode">tree,form</field>
        </record>
        <record id="action_tesoreria_form" model="ir.actions.act_window">
            <field name="name">Tesoreria</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">as.tesoreria</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a new company
                </p>
                <p>
                    Create and manage the companies that will be managed by Odoo from here. Shops or subsidiaries can be
                    created and maintained from here.
                </p>
            </field>
        </record>
        <menuitem action="action_tesoreria_form" id="menu_action_tesoreria_form"
            parent="account.menu_finance_receivables" />

    </data>
</odoo>